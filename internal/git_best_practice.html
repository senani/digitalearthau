


<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Git Best Practice &mdash; Digital Earth Australia 1.0.0 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/dea-favicon.ico"/>
  
  
  

  

  
  
    

  

  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="DEA Release Process" href="release.html" />
    <link rel="prev" title="Creating a New Product" href="new_product.html" /> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html">
          

          
            
            <img src="../_static/DEA-logo-light.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                1.0.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Overview</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../about/intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../about/glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../about/changelog.html">DEA NCI Environment Changelog</a></li>
</ul>
<p class="caption"><span class="caption-text">Connect</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../connect/account.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../connect/install.html">Installation and Software Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="../connect/nci_basics.html">Command Line Usage (Advanced)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../connect/jupyter.html">Jupyter Notebooks Introduction</a></li>
</ul>
<p class="caption"><span class="caption-text">User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../query/Getting Started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../query/List Products.html">List Products &amp; Measurements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../query/Loading Data.html">Loading data from the datacube</a></li>
</ul>
<p class="caption"><span class="caption-text">Notebook Gallery</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../notebooks/index.html">Notebook Gallery</a></li>
</ul>
<p class="caption"><span class="caption-text">Data Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../data/data.html">Surface Reflectance</a></li>
</ul>
<p class="caption"><span class="caption-text">Developer Guide</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="new_product.html">Creating a New Product</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Git Best Practice</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#initial-setup">Initial Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="#main-principles">Main Principles</a></li>
<li class="toctree-l2"><a class="reference internal" href="#commit-message-format">Commit Message Format</a></li>
<li class="toctree-l2"><a class="reference internal" href="#clean-linear-history">Clean Linear History</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#pull-with-rebase">Pull with Rebase</a></li>
<li class="toctree-l3"><a class="reference internal" href="#cleanup-before-sharing">Cleanup Before Sharing</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#bug-fix-workflow">Bug Fix Workflow</a></li>
<li class="toctree-l2"><a class="reference internal" href="#new-feature-workflow">New Feature Workflow</a></li>
<li class="toctree-l2"><a class="reference internal" href="#travis-and-coveralls-integration">Travis and Coveralls Integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="#pull-requests">Pull Requests</a></li>
<li class="toctree-l2"><a class="reference internal" href="#links">Links</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="release.html">DEA Release Process</a></li>
<li class="toctree-l1"><a class="reference internal" href="modules.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="modules.html#user-instructions">User instructions</a></li>
<li class="toctree-l1"><a class="reference internal" href="modules.html#maintainer-instructions">Maintainer Instructions</a></li>
<li class="toctree-l1"><a class="reference internal" href="other_modules.html">Other Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="orchestration.html">DEA Orchestration</a></li>
<li class="toctree-l1"><a class="reference internal" href="collection_management.html">Collection Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="goalkeeper_instructions.html">What’s a Goalkeeper</a></li>
<li class="toctree-l1"><a class="reference internal" href="requirements_met.html">DEA Code Functionality Examples</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../genindex.html">Tags Index</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Digital Earth Australia</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Git Best Practice</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/internal/git_best_practice.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast,
.nboutput.nblast {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast + .nbinput {
    margin-top: -19px;
}

/* nice headers on first paragraph of info/warning boxes */
.admonition .first {
    margin: -12px;
    padding: 6px 12px;
    margin-bottom: 12px;
    color: #fff;
    line-height: 1;
    display: block;
}
.admonition.warning .first {
    background: #f0b37e;
}
.admonition.note .first {
    background: #6ab0de;
}
.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}
</style>
<div class="section" id="git-best-practice">
<h1>Git Best Practice<a class="headerlink" href="#git-best-practice" title="Permalink to this headline">¶</a></h1>
<p>We use git for version control management. Repositories are usually hosted on
GitHub. In this document we assume that you are already familiar with the common
terminology around version control in git. If terms like <code class="docutils literal notranslate"><span class="pre">clone</span></code>,
<code class="docutils literal notranslate"><span class="pre">checkout</span></code>, <code class="docutils literal notranslate"><span class="pre">commit</span></code>, <code class="docutils literal notranslate"><span class="pre">pull</span></code>, <code class="docutils literal notranslate"><span class="pre">branch</span></code> don’t have a clear meaning for you
please consider reading up on git online first.</p>
<ul class="simple">
<li><a class="reference external" href="https://www.atlassian.com/git">https://www.atlassian.com/git</a> good introduction, but dives deep too</li>
<li><a class="reference external" href="https://help.github.com">https://help.github.com</a> covers a lot of detail and github specifics</li>
</ul>
<div class="section" id="initial-setup">
<h2>Initial Setup<a class="headerlink" href="#initial-setup" title="Permalink to this headline">¶</a></h2>
<p>When setting up new dev machine make sure that your git identity is properly configured.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git config --global user.name <span class="s2">&quot;YourFirstName YourLastName&quot;</span>
git config --global user.email <span class="s2">&quot;your_email@example.com&quot;</span>
<span class="c1"># configure other useful options</span>
git config --global pull.rebase <span class="nb">true</span>
<span class="c1"># review</span>
git config --list
</pre></div>
</div>
</div>
<div class="section" id="main-principles">
<h2>Main Principles<a class="headerlink" href="#main-principles" title="Permalink to this headline">¶</a></h2>
<p>Below are the main guiding principles, we will expand on that through out the document</p>
<ul class="simple">
<li>Treat commit history as a form of documentation</li>
<li>Group related changes together</li>
<li>Avoid combining unrelated changes into one commit</li>
<li>Communicate intent and context of the change not just what changed</li>
<li>Maintain mostly linear history</li>
</ul>
<p>In the ideal world code is written once and is perfect from the start: there are
no mistakes and all future uses are anticipated and catered for at the time of
inception. In this perfect world every new commit is new code which adds new
features. In the real world people make mistakes in the code, third party APIs
change without any warning, code formatting is sometimes off, all these things
stand in the way, all need to be fixed in the process of developing the new
feature. While all these changes are necessary, they are still incidental to the
core task of new feature development. We should try to put each incidental
change into a separate commit. Separating “preparatory work” from “actual new
feature” really helps with code review.</p>
<p>Commit messages are an important communication channel, use them to communicate
information that can not be easily extracted from the code: why was the change
necessary, what that means for code that might depend on the code that got
changed. Try to provide context for the change without being overly verbose.</p>
<p>Git is a very flexible tool and allows for a broad range of workflows, changes
can be happening in a number of parallel branches, those branches can then be
<em>merged</em> in any order creating a rather non-linear history which can be hard to
follow. We adopt a more constrained approach, commonly referred as “Feature
Branch Workflow”. In short this means that there is one main branch <code class="docutils literal notranslate"><span class="pre">master</span></code>
or <code class="docutils literal notranslate"><span class="pre">develop</span></code>, no major work is done in the main branch, instead new features
are developed in separate feature branches, those then get merged into the main
branch when ready.</p>
</div>
<div class="section" id="commit-message-format">
<h2>Commit Message Format<a class="headerlink" href="#commit-message-format" title="Permalink to this headline">¶</a></h2>
<p>Good commit messages make collaboration easier. Commit message should consist of
short summary line, 50 characters of less, followed by a blank line, followed by
expanded description. It is fine to omit expanded description and the blank line
before it if the change is small. Start your summary line with a capital letter,
don’t put full stop [.] at the end of the summary line.</p>
<p>Many tools, GitHub including, expect this format and sticking to it makes
inspecting history more accessible.</p>
<p>When writing the summary line prefer to use the <em>“imperative mood”</em> (i.e. “spoken or
written as if giving a command or instruction”). So use</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Fix spelling mistake in the help message</span>
</pre></div>
</div>
<p>and not:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Fixed spelling mistake in the help message</span>
</pre></div>
</div>
<p>Write it as if finishing this sentence: “When applied this commit will …”, but
still start with a capital letter. For a more expanded exploration of the topic
see <a class="reference external" href="https://chris.beams.io/posts/git-commit/">https://chris.beams.io/posts/git-commit/</a></p>
</div>
<div class="section" id="clean-linear-history">
<h2>Clean Linear History<a class="headerlink" href="#clean-linear-history" title="Permalink to this headline">¶</a></h2>
<div class="section" id="pull-with-rebase">
<h3>Pull with Rebase<a class="headerlink" href="#pull-with-rebase" title="Permalink to this headline">¶</a></h3>
<p>When grabbing changes from remote use <code class="docutils literal notranslate"><span class="pre">--rebase</span></code> switch, this keeps history
linear by replaying your changes on top of remote changes.</p>
<p>For example <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">pull</span> <span class="pre">--rebase</span> <span class="pre">origin</span> <span class="pre">master</span></code>. Alternatively make pull with
rebase a global default <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">config</span> <span class="pre">--global</span> <span class="pre">pull.rebase</span> <span class="pre">true</span></code>. Your editor
probably has this option, certainly PyCharm supports pulling with rebase.</p>
</div>
<div class="section" id="cleanup-before-sharing">
<h3>Cleanup Before Sharing<a class="headerlink" href="#cleanup-before-sharing" title="Permalink to this headline">¶</a></h3>
<p>Just like code can be edited, so can be git history. You don’t need to type out
perfect code on the first try, you don’t need to delay committing your code
until it’s “just right”, “work in progress” commits are perfectly fine so long
as you clean it up before sharing your changes.</p>
<p>The easiest and most common method is to <em>amend</em> the very last commit <code class="docutils literal notranslate"><span class="pre">git</span>
<span class="pre">commit</span> <span class="pre">--amend</span></code>. Maybe you want to correct a typo in the commit message, or you
forgot to add a new file, you can easily amend last commit. Your editor most
likely supports that out of the box.</p>
<p>A more comprehensive method is <em>Interactive Rebase</em>, it allows to re-order
commits, squash independent commits into one, update commit messages for older
commits and more. While you can use it with just plain command line <code class="docutils literal notranslate"><span class="pre">git</span>
<span class="pre">rebase</span> <span class="pre">-i</span> <span class="pre">HEAD~3</span></code>, it’s probably best to use some kind of GUI client for
complex tasks like that. Maybe your editor/IDE already supports that, if not try
some of the tools listed below</p>
<ul class="simple">
<li><a class="reference external" href="https://www.gitkraken.com">https://www.gitkraken.com</a></li>
<li><a class="reference external" href="https://www.sourcetreeapp.com">https://www.sourcetreeapp.com</a></li>
<li>Docs for plain git <a class="reference external" href="https://help.github.com/articles/changing-a-commit-message/">https://help.github.com/articles/changing-a-commit-message/</a></li>
</ul>
</div>
</div>
<div class="section" id="bug-fix-workflow">
<h2>Bug Fix Workflow<a class="headerlink" href="#bug-fix-workflow" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>Create issue on GitHub, if not created already</li>
<li>Create new branch with a reasonable name, <code class="docutils literal notranslate"><span class="pre">fix-issue-273</span></code> is fine</li>
<li>Develop a fix and hopefully unit tests</li>
<li>Commit your changes to local branch</li>
<li>Pull changes from main branch into your branch with rebase</li>
<li>Push your branch to GitHub</li>
<li>Create pull request</li>
</ol>
</div>
<div class="section" id="new-feature-workflow">
<h2>New Feature Workflow<a class="headerlink" href="#new-feature-workflow" title="Permalink to this headline">¶</a></h2>
<p>As far as git mechanics go new feature development is similar to <a class="reference internal" href="#bug-fix-workflow">Bug Fix
Workflow</a>. New features are developed in a feature branch. Since new feature
development is likely to take longer than a bug fix it becomes important to keep
your branch in sync with the main branch to minimize the pain of one massive
merge at the end. So make sure to run <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">pull</span> <span class="pre">--rebase</span> <span class="pre">origin</span> <span class="pre">develop</span></code> every
so often in your feature branch.</p>
<p>Again since it takes longer, it’s best to push your branch to GitHub even if you
are not ready to merge it back into the main. This gives visibility of the work
to other team members and also serves as an offsite backup of your work. Note
that it is still OK to “edit history” in your feature branch even if that
history has been pushed to GitHub, but you will need to <em>force</em> push your
changes when you do: <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">push</span> <span class="pre">--force</span></code>. We assume that feature branch is your
“private branch”, and so nobody will be impacted by history edits. If that’s not
the case, i.e. multiple people are working on the same branch, then you should
not edit history you have shared with others. Don’t worry you can still cleanup
the history later on when feature development is complete just before creating a
pull request.</p>
<p>Creating pull request for a new feature is a little bit more involved than for a
bug fix. Particularly for larger changes please take care to document the work
you done in detail using GitHub comment interface, you can use markdown for
formatting. Try to make the reviewers job easier by providing context of the
change that might be difficult to extract from the code diff alone.</p>
</div>
<div class="section" id="travis-and-coveralls-integration">
<h2>Travis and Coveralls Integration<a class="headerlink" href="#travis-and-coveralls-integration" title="Permalink to this headline">¶</a></h2>
<p>We use free service Travis CI <a class="reference external" href="https://travis-ci.org">https://travis-ci.org</a> to automatically run
unit tests when new code is pushed to GitHub. When running unit tests we extract
“code coverage” statistics for given test run. We use Coveralls
<a class="reference external" href="https://coveralls.zendesk.com/">https://coveralls.zendesk.com/</a> to keep track of how code coverage
percentage changes over time. The expectation is that code coverage percentage
increases over time or at least doesn’t go backwards by a lot for too long. As
new features are added so are the unit-tests that test new code.</p>
</div>
<div class="section" id="pull-requests">
<h2>Pull Requests<a class="headerlink" href="#pull-requests" title="Permalink to this headline">¶</a></h2>
<p>When accepting pull requests GitHub gives you three different options. The
default behavior is to create a merge commit <em>“Merge pull request”</em>. Use this
option for larger requests.</p>
<img alt="GitHub merge pull request screenshot" src="../_images/github-merge-pull-request.png" />
<p>For smaller changes, a bug fix or a small feature, couple of small commits in
size, use the <em>“Rebase and merge”</em> option. This will make it look like the
feature was developed directly in the main branch.</p>
</div>
<div class="section" id="links">
<h2>Links<a class="headerlink" href="#links" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference external" href="https://chris.beams.io/posts/git-commit/">https://chris.beams.io/posts/git-commit/</a></li>
<li><a class="reference external" href="https://www.jetbrains.com/help/pycharm/2017.2/using-git-integration.html">https://www.jetbrains.com/help/pycharm/2017.2/using-git-integration.html</a></li>
<li><a class="reference external" href="https://help.github.com/articles/changing-a-commit-message/">https://help.github.com/articles/changing-a-commit-message/</a></li>
<li><a class="reference external" href="https://www.gitkraken.com">https://www.gitkraken.com</a></li>
<li><a class="reference external" href="https://www.sourcetreeapp.com">https://www.sourcetreeapp.com</a></li>
<li><a class="reference external" href="https://www.atlassian.com/git">https://www.atlassian.com/git</a></li>
<li><a class="reference external" href="https://help.github.com">https://help.github.com</a></li>
</ul>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="release.html" class="btn btn-neutral float-right" title="DEA Release Process" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="new_product.html" class="btn btn-neutral" title="Creating a New Product" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Geoscience Australia.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.0.0',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  <script type="text/javascript">
      jQuery(function () {
          
          SphinxRtdTheme.Navigation.enableSticky();
          
      });
  </script>


<!-- Theme Analytics -->
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-113800428-1"></script>
<script>
 window.dataLayer = window.dataLayer || [];
 function gtag(){dataLayer.push(arguments);}
 gtag('js', new Date());
 
 gtag('config', 'UA-113800428-1');
</script>

    
  


</body>
</html>