


<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Exporting compliant NetCDF datasets for publication &mdash; Digital Earth Australia 1.0.0 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/dea-favicon.ico"/>
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Workflows" href="../Workflows/README.html" />
    <link rel="prev" title="Plotting animations from time series imagery" href="PlottingAnimatedGifs.html" /> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html">
          

          
            
            <img src="../../_static/DEA-logo-light.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                1.0.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Overview</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../about/intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../about/glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../about/changelog.html">DEA NCI Environment Changelog</a></li>
</ul>
<p class="caption"><span class="caption-text">Connect</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../connect/account.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../connect/install.html">Installation and Software Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../connect/nci_basics.html">Command Line Usage (Advanced)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../connect/jupyter.html">Jupyter Notebooks Introduction</a></li>
</ul>
<p class="caption"><span class="caption-text">User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../query/Getting Started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../query/List Products.html">List Products &amp; Measurements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../query/Loading Data.html">Loading data from the datacube</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../query/Advanced Querying.html">Advanced Querying</a></li>
</ul>
<p class="caption"><span class="caption-text">Notebook Gallery</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">User Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../Getting_started/README.html">Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="../DEA_datasets/README.html">DEA Datasets</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Integrating_external_data/README.html">Integrating External Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Index_calculation/README.html">Index Calculation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Temporal_analysis/README.html">Temporal Analyses</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Composite_generation/README.html">Composite Generation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Image_classification/README.html">Image Classification</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="README.html">Outputting data</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="ProduceFalseColourGeotiffs.html">ProduceFalseColourGeotiffs</a></li>
<li class="toctree-l3"><a class="reference internal" href="PlottingAnimatedGifs.html">Plotting animations from time series imagery</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Exporting compliant NetCDF datasets for publication</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#Import-sample-data">Import sample data</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Create-new-NetCDF">Create new NetCDF</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Testing-compliance">Testing compliance</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../Workflows/README.html">Workflows</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Scripts/README.html">Scripts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../README.html">Overview of DEA Notebooks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tags.html">Tagging Notebooks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../genindex.html">Tags Index</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Data Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../data/data.html">Surface Reflectance</a></li>
</ul>
<p class="caption"><span class="caption-text">Developer Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../internal/new_product.html">Creating a New Product</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../internal/git_best_practice.html">Git Best Practice</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../internal/release.html">DEA Release Process</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../internal/modules.html">DEA Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../internal/other_modules.html">Other Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../internal/orchestration.html">DEA Orchestration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../internal/collection_management.html">Collection Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../internal/goalkeeper_instructions.html">What’s a Goalkeeper</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../internal/requirements_met.html">DEA Code Functionality Examples</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../genindex.html">Tags Index</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Digital Earth Australia</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">User Guide</a> &raquo;</li>
        
          <li><a href="README.html">Outputting data</a> &raquo;</li>
        
      <li>Exporting compliant NetCDF datasets for publication</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/notebooks/Outputting_data/ExportingCompliantNetCDFs.ipynb.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput,
div.nbinput div.prompt,
div.nbinput div.input_area,
div.nbinput div[class*=highlight],
div.nbinput div[class*=highlight] pre,
div.nboutput,
div.nbinput div.prompt,
div.nbinput div.output_area,
div.nboutput div[class*=highlight],
div.nboutput div[class*=highlight] pre {
    background: none;
    border: none;
    padding: 0 0;
    margin: 0;
    box-shadow: none;
}

/* avoid gaps between output lines */
div.nboutput div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput,
div.nboutput {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput,
    div.nboutput {
        flex-direction: column;
    }
}

/* input container */
div.nbinput {
    padding-top: 5px;
}

/* last container */
div.nblast {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput div.prompt pre {
    color: #303F9F;
}

/* output prompt */
div.nboutput div.prompt pre {
    color: #D84315;
}

/* all prompts */
div.nbinput div.prompt,
div.nboutput div.prompt {
    min-width: 8ex;
    padding-top: 0.4em;
    padding-right: 0.4em;
    text-align: right;
    flex: 0;
}
@media (max-width: 540px) {
    div.nbinput div.prompt,
    div.nboutput div.prompt {
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput div.prompt.empty {
        padding: 0;
    }
}

/* disable scrollbars on prompts */
div.nbinput div.prompt pre,
div.nboutput div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput div.input_area,
div.nboutput div.output_area {
    padding: 0.4em;
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput div.input_area,
    div.nboutput div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput div.input_area {
    border: 1px solid #cfcfcf;
    border-radius: 2px;
    background: #f7f7f7;
}

/* override MathJax center alignment in output cells */
div.nboutput div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.pngmath center alignment in output cells */
div.nboutput div.math p {
    text-align: left;
}

/* standard error */
div.nboutput div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }

/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast,
.nboutput.nblast {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast + .nbinput {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}
</style>
<div class="section" id="Exporting-compliant-NetCDF-datasets-for-publication">
<h1>Exporting compliant NetCDF datasets for publication<a class="headerlink" href="#Exporting-compliant-NetCDF-datasets-for-publication" title="Permalink to this headline">¶</a></h1>
<p><strong>What does this notebook do?</strong></p>
<p>This notebook demonstrates how to create a NetCDF output file that is
compliant with the requirements of the NCI and international metadata
standards. This is specifically intended to assist with products that
were produced <strong>outside</strong> of standard <code class="docutils literal notranslate"><span class="pre">datacube</span></code> workflows: for
example, where data exists in array or raster form rather than having
been automatically generated using a <code class="docutils literal notranslate"><span class="pre">datacube-stats</span></code> workflow. The
notebook demonstrates how to use a selection of existing <code class="docutils literal notranslate"><span class="pre">datacube</span></code>
functions to create the NetCDF, as these automatically create much of
the required metadata.</p>
<p><em>(This is an in-progress document which is likely to be updated
regularly as this procedure is streamlined. Pelase raise an issue on the
dea-notebooks repository or contact the author if you have any
suggestions on improving the workflow)</em></p>
<p><strong>Required inputs</strong> This notebook uses sample data from the National
Intertidal Digital Elevation Model (NIDEM) located at
<code class="docutils literal notranslate"><span class="pre">/g/data/r78/rt1527/nidem/output_data/</span></code>.</p>
<p><strong>Date:</strong> June 2018</p>
<p><strong>Author:</strong> Robbi Bishop-Taylor</p>
<p><strong>Tags</strong>: <span class="target" id="index-0"></span>NetCDF, <span class="target" id="index-1"></span>Compliant files, <span class="target" id="index-2"></span>CF, <span class="target" id="index-3"></span>ACDD, <span class="target" id="index-4"></span>Publication, <span class="target" id="index-5"></span>NCI, <span class="target" id="index-6"></span>Outputting data</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Import modules</span>
<span class="kn">import</span> <span class="nn">rasterio</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">datacube.model</span> <span class="k">import</span> <span class="n">Variable</span>
<span class="kn">from</span> <span class="nn">datacube.utils.geometry</span> <span class="k">import</span> <span class="n">Coordinate</span>
<span class="kn">from</span> <span class="nn">datacube.utils.geometry</span> <span class="k">import</span> <span class="n">CRS</span>
<span class="kn">from</span> <span class="nn">datacube.storage.storage</span> <span class="k">import</span> <span class="n">create_netcdf_storage_unit</span>
<span class="kn">from</span> <span class="nn">datacube.storage</span> <span class="k">import</span> <span class="n">netcdf_writer</span>

</pre></div>
</div>
</div>
<div class="section" id="Import-sample-data">
<h2>Import sample data<a class="headerlink" href="#Import-sample-data" title="Permalink to this headline">¶</a></h2>
<p>For this example, we will create a compliant NetCDF file that contains
three seperate input raster datasets. First, import the sample datasets:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Use rasterio to load the input rasters</span>
<span class="n">nidem_dem</span> <span class="o">=</span> <span class="n">rasterio</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s1">&#39;/g/data/r78/rt1527/nidem/output_data/geotiff/dem/NIDEM_dem_33.tif&#39;</span><span class="p">)</span>
<span class="n">nidem_unfiltered</span> <span class="o">=</span> <span class="n">rasterio</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s1">&#39;/g/data/r78/rt1527/nidem/output_data/geotiff/dem_unfiltered/NIDEM_unfiltered_33.tif&#39;</span><span class="p">)</span>
<span class="n">nidem_mask</span> <span class="o">=</span> <span class="n">rasterio</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s1">&#39;/g/data/r78/rt1527/nidem/output_data/geotiff/mask/NIDEM_mask_33.tif&#39;</span><span class="p">)</span>

<span class="c1"># Read data as numpy arrays</span>
<span class="n">nidem_dem_array</span> <span class="o">=</span> <span class="n">nidem_dem</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">nidem_unfiltered_array</span> <span class="o">=</span> <span class="n">nidem_unfiltered</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">nidem_mask_array</span> <span class="o">=</span> <span class="n">nidem_mask</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="Create-new-NetCDF">
<h2>Create new NetCDF<a class="headerlink" href="#Create-new-NetCDF" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Here we create a new NetCDF storage unit using the
<code class="docutils literal notranslate"><span class="pre">create_netcdf_storage_unit</span></code> function from
<code class="docutils literal notranslate"><span class="pre">datacube.storage.storage</span></code></li>
<li>This lets us set up the dataset’s coordinate reference system,
dataset dimensions (e.g. x and y coordinates) and create empty
variables tied to the above dimensions with manually defined nodata
values, units and dtypes.</li>
<li>Using the <code class="docutils literal notranslate"><span class="pre">CRS</span></code>, <code class="docutils literal notranslate"><span class="pre">Coordinate</span></code> and <code class="docutils literal notranslate"><span class="pre">Variable</span></code> functions
automatically generates much of the required metadata, including
<code class="docutils literal notranslate"><span class="pre">geospatial_bounds</span></code>, <code class="docutils literal notranslate"><span class="pre">geospatial_bounds_crs</span></code>,
<code class="docutils literal notranslate"><span class="pre">geospatial_lat_*</span></code> and <code class="docutils literal notranslate"><span class="pre">geospatial_lon_*</span></code>.</li>
</ul>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Calculate coordinates for each pixel in the x and y directions based on the input dataset</span>
<span class="n">x_coords</span> <span class="o">=</span> <span class="p">[</span><span class="n">nidem_dem</span><span class="o">.</span><span class="n">xy</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">col</span><span class="o">=</span><span class="n">x_ind</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">x_ind</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">nidem_mask</span><span class="o">.</span><span class="n">width</span><span class="p">)]</span>
<span class="n">y_coords</span> <span class="o">=</span> <span class="p">[</span><span class="n">nidem_dem</span><span class="o">.</span><span class="n">xy</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="n">y_ind</span><span class="p">,</span> <span class="n">col</span><span class="o">=</span><span class="mi">0</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">y_ind</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">nidem_mask</span><span class="o">.</span><span class="n">height</span><span class="p">)]</span>

<span class="c1"># Use netcdfy_coord to produce compliant coordinates</span>
<span class="n">x_coords</span> <span class="o">=</span> <span class="n">netcdf_writer</span><span class="o">.</span><span class="n">netcdfy_coord</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">x_coords</span><span class="p">))</span>
<span class="n">y_coords</span> <span class="o">=</span> <span class="n">netcdf_writer</span><span class="o">.</span><span class="n">netcdfy_coord</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">y_coords</span><span class="p">))</span>

<span class="c1"># Create new dataset</span>
<span class="n">output_netcdf</span> <span class="o">=</span> <span class="n">create_netcdf_storage_unit</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="s1">&#39;sample.nc&#39;</span><span class="p">,</span>

               <span class="c1"># Set coordinate reference system</span>
               <span class="n">crs</span><span class="o">=</span><span class="n">CRS</span><span class="p">(</span><span class="s1">&#39;EPSG:3577&#39;</span><span class="p">),</span>

               <span class="c1"># Set up dimensions using x and y coordinates computed above</span>
               <span class="n">coordinates</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="n">Coordinate</span><span class="p">(</span><span class="n">x_coords</span><span class="p">,</span> <span class="s1">&#39;metres&#39;</span><span class="p">),</span>
                            <span class="s1">&#39;y&#39;</span><span class="p">:</span> <span class="n">Coordinate</span><span class="p">(</span><span class="n">y_coords</span><span class="p">,</span> <span class="s1">&#39;metres&#39;</span><span class="p">)},</span>

               <span class="c1"># Set up empty variables for each layer, specifying the units and nodata</span>
               <span class="n">variables</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;dem&#39;</span><span class="p">:</span> <span class="n">Variable</span><span class="p">(</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">dtype</span><span class="p">(</span><span class="s1">&#39;float32&#39;</span><span class="p">),</span>
                                          <span class="n">nodata</span><span class="o">=-</span><span class="mi">9999</span><span class="p">,</span>
                                          <span class="n">dims</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;x&#39;</span><span class="p">),</span>
                                          <span class="n">units</span><span class="o">=</span><span class="s1">&#39;metres&#39;</span><span class="p">),</span>
                          <span class="s1">&#39;dem_unfiltered&#39;</span><span class="p">:</span> <span class="n">Variable</span><span class="p">(</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">dtype</span><span class="p">(</span><span class="s1">&#39;float32&#39;</span><span class="p">),</span>
                                                     <span class="n">nodata</span><span class="o">=-</span><span class="mi">9999</span><span class="p">,</span>
                                                     <span class="n">dims</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;x&#39;</span><span class="p">),</span>
                                                     <span class="n">units</span><span class="o">=</span><span class="s1">&#39;metres&#39;</span><span class="p">),</span>
                          <span class="s1">&#39;mask&#39;</span><span class="p">:</span> <span class="n">Variable</span><span class="p">(</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">dtype</span><span class="p">(</span><span class="s1">&#39;int16&#39;</span><span class="p">),</span>
                                           <span class="n">nodata</span><span class="o">=-</span><span class="mi">9999</span><span class="p">,</span>
                                           <span class="n">dims</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;x&#39;</span><span class="p">),</span>
                                           <span class="n">units</span><span class="o">=</span><span class="s1">&#39;metres&#39;</span><span class="p">)},</span>

               <span class="c1"># This can be used to specify optional NetCDF creation options like compression</span>
               <span class="n">variable_params</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;dem&#39;</span><span class="p">:</span> <span class="p">{}})</span>

<span class="nb">print</span><span class="p">(</span><span class="n">output_netcdf</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;class &#39;datacube.storage.netcdf_safestrings.SafeStringsDataset&#39;&gt;
root group (NETCDF4 data model, file format HDF5):
    date_created: 2018-06-27T16:29:06.603271
    Conventions: CF-1.6, ACDD-1.3
    history: NetCDF-CF file created by datacube version &#39;1.6rc1+28.ga69dfff5&#39; at 20180627.
    geospatial_bounds: POLYGON ((130.601383569373 -11.9746230018132,130.595069713574 -12.5618627239134,130.588698595575 -13.1477581546625,131.319765093712 -13.1538034581567,131.322836107244 -12.5678942916324,131.325879516635 -11.9806414811064,130.601383569373 -11.9746230018132))
    geospatial_bounds_crs: EPSG:4326
    geospatial_lat_min: -13.153803458156746
    geospatial_lat_max: -11.974623001813235
    geospatial_lat_units: degrees_north
    geospatial_lon_min: 130.58869859557532
    geospatial_lon_max: 131.32587951663467
    geospatial_lon_units: degrees_east
    dimensions(sizes): x(3219), y(5102)
    variables(dimensions): float64 x(x), float64 y(y), int32 crs(), float32 dem(y,x), float32 dem_unfiltered(y,x), int16 mask(y,x)
    groups:

</pre></div></div>
</div>
<div class="section" id="Assign-data-and-attributes-to-each-variable">
<h3>Assign data and attributes to each variable<a class="headerlink" href="#Assign-data-and-attributes-to-each-variable" title="Permalink to this headline">¶</a></h3>
<p>So far, the created NetCDF contains no data. The next step is to assign
each of our data arrays into the previously created variables, and set
metadata for each variable. * Using the <code class="docutils literal notranslate"><span class="pre">netcdfy_data</span></code> function will
ensure the data types are compliant. * Include a descriptive summary of
the variable for <code class="docutils literal notranslate"><span class="pre">long_name</span></code>. * If applicable, use <code class="docutils literal notranslate"><span class="pre">valid_range</span></code> to
set the valid numeric range for the data. * For most datasets,
<code class="docutils literal notranslate"><span class="pre">coverage_content_type</span></code> can be set to ‘modelResult’ (valid options are
‘image’, ‘thematicClassification’, ‘physicalMeasurement’,
‘auxiliaryInformation’, ‘qualityInformation’, ‘referenceInformation’,
‘modelResult’, ‘coordinate’) * The <code class="docutils literal notranslate"><span class="pre">standard_name</span></code> attribute links
the data to a specific pre-defined type of data defined by the Climate
and Forecast (CF) Metadata Conventions. If applicable, select an option
from this website
(<a class="reference external" href="http://cfconventions.org/Data/cf-standard-names/55/build/cf-standard-name-table.html">http://cfconventions.org/Data/cf-standard-names/55/build/cf-standard-name-table.html</a>);
e.g. ‘height_above_mean_sea_level’ below. If none of the
<code class="docutils literal notranslate"><span class="pre">standard_name</span></code> options fit your data, it is best to leave it out,
even though this will cause the NetCDF files to fail one of the ACDD
tests.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [17]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># dem: assign data and set variable attributes</span>
<span class="n">output_netcdf</span><span class="p">[</span><span class="s1">&#39;dem&#39;</span><span class="p">][:]</span> <span class="o">=</span> <span class="n">netcdf_writer</span><span class="o">.</span><span class="n">netcdfy_data</span><span class="p">(</span><span class="n">nidem_dem_array</span><span class="p">)</span>
<span class="n">output_netcdf</span><span class="p">[</span><span class="s1">&#39;dem&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">valid_range</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mf">25.0</span><span class="p">,</span> <span class="mf">25.0</span><span class="p">]</span>
<span class="n">output_netcdf</span><span class="p">[</span><span class="s1">&#39;dem&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">standard_name</span> <span class="o">=</span> <span class="s1">&#39;height_above_mean_sea_level&#39;</span>
<span class="n">output_netcdf</span><span class="p">[</span><span class="s1">&#39;dem&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">coverage_content_type</span> <span class="o">=</span> <span class="s1">&#39;modelResult&#39;</span>
<span class="n">output_netcdf</span><span class="p">[</span><span class="s1">&#39;dem&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">long_name</span> <span class="o">=</span> <span class="s1">&#39;NIDEM filtered by ITEM confidence (&lt; 0.25 NDWI SD), &#39;</span> \
                                 <span class="s1">&#39;bathymetry (&gt; -25 m) and elevation (&lt; 25 m)&#39;</span>

<span class="c1"># dem_unfiltered: assign data and set variable attributes</span>
<span class="n">output_netcdf</span><span class="p">[</span><span class="s1">&#39;dem_unfiltered&#39;</span><span class="p">][:]</span> <span class="o">=</span> <span class="n">netcdf_writer</span><span class="o">.</span><span class="n">netcdfy_data</span><span class="p">(</span><span class="n">nidem_unfiltered_array</span><span class="p">)</span>
<span class="n">output_netcdf</span><span class="p">[</span><span class="s1">&#39;dem_unfiltered&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">standard_name</span> <span class="o">=</span> <span class="s1">&#39;height_above_mean_sea_level&#39;</span>
<span class="n">output_netcdf</span><span class="p">[</span><span class="s1">&#39;dem_unfiltered&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">coverage_content_type</span> <span class="o">=</span> <span class="s1">&#39;modelResult&#39;</span>
<span class="n">output_netcdf</span><span class="p">[</span><span class="s1">&#39;dem_unfiltered&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">long_name</span> <span class="o">=</span> <span class="s1">&#39;NIDEM unfiltered data&#39;</span>

<span class="c1"># mask: assign data and set variable attributes</span>
<span class="n">output_netcdf</span><span class="p">[</span><span class="s1">&#39;mask&#39;</span><span class="p">][:]</span> <span class="o">=</span> <span class="n">netcdf_writer</span><span class="o">.</span><span class="n">netcdfy_data</span><span class="p">(</span><span class="n">nidem_mask_array</span><span class="p">)</span>
<span class="n">output_netcdf</span><span class="p">[</span><span class="s1">&#39;mask&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">valid_range</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="n">output_netcdf</span><span class="p">[</span><span class="s1">&#39;mask&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">coverage_content_type</span> <span class="o">=</span> <span class="s1">&#39;qualityInformation&#39;</span>
<span class="n">output_netcdf</span><span class="p">[</span><span class="s1">&#39;mask&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">long_name</span> <span class="o">=</span> <span class="s1">&#39;NIDEM mask flagging cells with elevations greater &#39;</span> \
                                  <span class="s1">&#39;than 25 m (value = 1), less than -25 m (value = 2), &#39;</span> \
                                  <span class="s1">&#39;and ITEM confidence NDWI standard deviation greater &#39;</span> \
                                  <span class="s1">&#39;than 0.25 (value = 3)&#39;</span>

<span class="c1"># The `variables` method lets you verify the data has been included in the dataset:</span>
<span class="nb">print</span><span class="p">(</span><span class="n">output_netcdf</span><span class="o">.</span><span class="n">variables</span><span class="p">)</span>

</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
OrderedDict([(&#39;x&#39;, &lt;class &#39;netCDF4._netCDF4.Variable&#39;&gt;
float64 x(x)
    units: metres
    standard_name: projection_x_coordinate
    long_name: x coordinate of projection
unlimited dimensions:
current shape = (3219,)
filling on, default _FillValue of 9.969209968386869e+36 used
), (&#39;y&#39;, &lt;class &#39;netCDF4._netCDF4.Variable&#39;&gt;
float64 y(y)
    units: metres
    standard_name: projection_y_coordinate
    long_name: y coordinate of projection
unlimited dimensions:
current shape = (5102,)
filling on, default _FillValue of 9.969209968386869e+36 used
), (&#39;crs&#39;, &lt;class &#39;netCDF4._netCDF4.Variable&#39;&gt;
int32 crs()
    grid_mapping_name: albers_conical_equal_area
    standard_parallel: [-18. -36.]
    longitude_of_central_meridian: 132.0
    latitude_of_projection_origin: 0.0
    false_easting: 0.0
    false_northing: 0.0
    long_name: GDA94 / Australian Albers
    semi_major_axis: 6378137.0
    semi_minor_axis: 6356752.314140356
    inverse_flattening: 298.257222101
    crs_wkt: PROJCS[&#34;GDA94 / Australian Albers&#34;,GEOGCS[&#34;GDA94&#34;,DATUM[&#34;Geocentric_Datum_of_Australia_1994&#34;,SPHEROID[&#34;GRS 1980&#34;,6378137,298.257222101,AUTHORITY[&#34;EPSG&#34;,&#34;7019&#34;]],TOWGS84[0,0,0,0,0,0,0],AUTHORITY[&#34;EPSG&#34;,&#34;6283&#34;]],PRIMEM[&#34;Greenwich&#34;,0,AUTHORITY[&#34;EPSG&#34;,&#34;8901&#34;]],UNIT[&#34;degree&#34;,0.0174532925199433,AUTHORITY[&#34;EPSG&#34;,&#34;9122&#34;]],AUTHORITY[&#34;EPSG&#34;,&#34;4283&#34;]],PROJECTION[&#34;Albers_Conic_Equal_Area&#34;],PARAMETER[&#34;standard_parallel_1&#34;,-18],PARAMETER[&#34;standard_parallel_2&#34;,-36],PARAMETER[&#34;latitude_of_center&#34;,0],PARAMETER[&#34;longitude_of_center&#34;,132],PARAMETER[&#34;false_easting&#34;,0],PARAMETER[&#34;false_northing&#34;,0],UNIT[&#34;metre&#34;,1,AUTHORITY[&#34;EPSG&#34;,&#34;9001&#34;]],AXIS[&#34;Easting&#34;,EAST],AXIS[&#34;Northing&#34;,NORTH],AUTHORITY[&#34;EPSG&#34;,&#34;3577&#34;]]
    spatial_ref: PROJCS[&#34;GDA94 / Australian Albers&#34;,GEOGCS[&#34;GDA94&#34;,DATUM[&#34;Geocentric_Datum_of_Australia_1994&#34;,SPHEROID[&#34;GRS 1980&#34;,6378137,298.257222101,AUTHORITY[&#34;EPSG&#34;,&#34;7019&#34;]],TOWGS84[0,0,0,0,0,0,0],AUTHORITY[&#34;EPSG&#34;,&#34;6283&#34;]],PRIMEM[&#34;Greenwich&#34;,0,AUTHORITY[&#34;EPSG&#34;,&#34;8901&#34;]],UNIT[&#34;degree&#34;,0.0174532925199433,AUTHORITY[&#34;EPSG&#34;,&#34;9122&#34;]],AUTHORITY[&#34;EPSG&#34;,&#34;4283&#34;]],PROJECTION[&#34;Albers_Conic_Equal_Area&#34;],PARAMETER[&#34;standard_parallel_1&#34;,-18],PARAMETER[&#34;standard_parallel_2&#34;,-36],PARAMETER[&#34;latitude_of_center&#34;,0],PARAMETER[&#34;longitude_of_center&#34;,132],PARAMETER[&#34;false_easting&#34;,0],PARAMETER[&#34;false_northing&#34;,0],UNIT[&#34;metre&#34;,1,AUTHORITY[&#34;EPSG&#34;,&#34;9001&#34;]],AXIS[&#34;Easting&#34;,EAST],AXIS[&#34;Northing&#34;,NORTH],AUTHORITY[&#34;EPSG&#34;,&#34;3577&#34;]]
    GeoTransform: [-1.553500e+05  2.500000e+01  0.000000e+00 -1.262375e+06  0.000000e+00
 -2.500000e+01]
unlimited dimensions:
current shape = ()
filling on, default _FillValue of -2147483647 used
), (&#39;dem&#39;, &lt;class &#39;netCDF4._netCDF4.Variable&#39;&gt;
float32 dem(y, x)
    _FillValue: -9999.0
    grid_mapping: crs
    units: metres
    valid_range: [-25.  25.]
    standard_name: height_above_mean_sea_level
    coverage_content_type: modelResult
    long_name: NIDEM filtered by ITEM confidence (&lt; 0.25 NDWI SD), bathymetry (&gt; -25 m) and elevation (&lt; 25 m)
unlimited dimensions:
current shape = (5102, 3219)
filling on), (&#39;dem_unfiltered&#39;, &lt;class &#39;netCDF4._netCDF4.Variable&#39;&gt;
float32 dem_unfiltered(y, x)
    _FillValue: -9999.0
    grid_mapping: crs
    units: metres
    standard_name: height_above_mean_sea_level
    coverage_content_type: modelResult
    long_name: NIDEM unfiltered data
unlimited dimensions:
current shape = (5102, 3219)
filling on), (&#39;mask&#39;, &lt;class &#39;netCDF4._netCDF4.Variable&#39;&gt;
int16 mask(y, x)
    _FillValue: -9999
    grid_mapping: crs
    units: metres
    valid_range: [1 3]
    coverage_content_type: qualityInformation
    long_name: NIDEM mask flagging cells with elevations greater than 25 m (value = 1), less than -25 m (value = 2), and ITEM confidence NDWI standard deviation greater than 0.25 (value = 3)
unlimited dimensions:
current shape = (5102, 3219)
filling on)])
</pre></div></div>
</div>
</div>
<div class="section" id="Add-global-metadata">
<h3>Add global metadata<a class="headerlink" href="#Add-global-metadata" title="Permalink to this headline">¶</a></h3>
<p>The next step is to add global attributes which provide metadata for the
entire NetCDF dataset including all variables. * This link
(<a class="reference external" href="https://geo-ide.noaa.gov/wiki/index.php?title=NetCDF_Attribute_Convention_for_Dataset_Discovery">https://geo-ide.noaa.gov/wiki/index.php?title=NetCDF_Attribute_Convention_for_Dataset_Discovery</a>)
provides guidance on the kinds of information that can be included. Aim
to include as many of the ‘Highly Recommended’ and ‘Recommended’
attributes as possible. * Many of the ‘Recommended’ attributes will be
automatically generated by <code class="docutils literal notranslate"><span class="pre">datacube</span></code> functions</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [18]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Add global attributes</span>
<span class="n">output_netcdf</span><span class="o">.</span><span class="n">title</span> <span class="o">=</span> <span class="s1">&#39;National Intertidal Digital Elevation Model (NIDEM) 25m v 0.1.0&#39;</span>
<span class="n">output_netcdf</span><span class="o">.</span><span class="n">institution</span> <span class="o">=</span> <span class="s1">&#39;Commonwealth of Australia (Geoscience Australia)&#39;</span>
<span class="n">output_netcdf</span><span class="o">.</span><span class="n">product_version</span> <span class="o">=</span> <span class="s1">&#39;0.1.0&#39;</span>
<span class="n">output_netcdf</span><span class="o">.</span><span class="n">license</span> <span class="o">=</span> <span class="s1">&#39;CC BY Attribution 4.0 International License&#39;</span>
<span class="n">output_netcdf</span><span class="o">.</span><span class="n">time_coverage_start</span> <span class="o">=</span> <span class="s1">&#39;1986-01-01&#39;</span>
<span class="n">output_netcdf</span><span class="o">.</span><span class="n">time_coverage_end</span> <span class="o">=</span> <span class="s1">&#39;2016-10-31&#39;</span>
<span class="n">output_netcdf</span><span class="o">.</span><span class="n">cdm_data_type</span> <span class="o">=</span> <span class="s1">&#39;Grid&#39;</span>
<span class="n">output_netcdf</span><span class="o">.</span><span class="n">contact</span> <span class="o">=</span> <span class="s1">&#39;clientservices@ga.gov.au&#39;</span>
<span class="n">output_netcdf</span><span class="o">.</span><span class="n">publisher_email</span> <span class="o">=</span> <span class="s1">&#39;earth.observation@ga.gov.au&#39;</span>
<span class="n">output_netcdf</span><span class="o">.</span><span class="n">source</span> <span class="o">=</span> <span class="s1">&#39;OTPS TPX08 Atlas&#39;</span>
<span class="n">output_netcdf</span><span class="o">.</span><span class="n">keywords</span> <span class="o">=</span> <span class="s1">&#39;Tidal, Topography, Landsat, Elevation, Intertidal, MSL, ITEM, NIDEM, DEM&#39;</span>
<span class="n">output_netcdf</span><span class="o">.</span><span class="n">summary</span> <span class="o">=</span> <span class="s2">&quot;Insert a detailed multiparagraph description of the dataset here&quot;</span>

<span class="c1"># When you print the dataset now, the new global attributes should appear:</span>
<span class="nb">print</span><span class="p">(</span><span class="n">output_netcdf</span><span class="p">)</span>

</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;class &#39;datacube.storage.netcdf_safestrings.SafeStringsDataset&#39;&gt;
root group (NETCDF4 data model, file format HDF5):
    date_created: 2018-06-27T16:29:06.603271
    Conventions: CF-1.6, ACDD-1.3
    history: NetCDF-CF file created by datacube version &#39;1.6rc1+28.ga69dfff5&#39; at 20180627.
    geospatial_bounds: POLYGON ((130.601383569373 -11.9746230018132,130.595069713574 -12.5618627239134,130.588698595575 -13.1477581546625,131.319765093712 -13.1538034581567,131.322836107244 -12.5678942916324,131.325879516635 -11.9806414811064,130.601383569373 -11.9746230018132))
    geospatial_bounds_crs: EPSG:4326
    geospatial_lat_min: -13.153803458156746
    geospatial_lat_max: -11.974623001813235
    geospatial_lat_units: degrees_north
    geospatial_lon_min: 130.58869859557532
    geospatial_lon_max: 131.32587951663467
    geospatial_lon_units: degrees_east
    title: National Intertidal Digital Elevation Model (NIDEM) 25m v 0.1.0
    institution: Commonwealth of Australia (Geoscience Australia)
    product_version: 0.1.0
    license: CC BY Attribution 4.0 International License
    time_coverage_start: 1986-01-01
    time_coverage_end: 2016-10-31
    cdm_data_type: Grid
    contact: clientservices@ga.gov.au
    publisher_email: earth.observation@ga.gov.au
    source: OTPS TPX08 Atlas
    keywords: Tidal, Topography, Landsat, Elevation, Intertidal, MSL, ITEM, NIDEM, DEM
    summary: Insert a detailed multiparagraph description of the dataset here
    dimensions(sizes): x(3219), y(5102)
    variables(dimensions): float64 x(x), float64 y(y), int32 crs(), float32 dem(y,x), float32 dem_unfiltered(y,x), int16 mask(y,x)
    groups:

</pre></div></div>
</div>
</div>
<div class="section" id="Close-the-dataset">
<h3>Close the dataset<a class="headerlink" href="#Close-the-dataset" title="Permalink to this headline">¶</a></h3>
<p>When you have finished adding data and metadata, close the file to write
it to file</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [19]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Close dataset</span>
<span class="n">output_netcdf</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="Testing-compliance">
<h2>Testing compliance<a class="headerlink" href="#Testing-compliance" title="Permalink to this headline">¶</a></h2>
<p>At minimum, the NCI requires compliance with the Climate and Forecast
Metadata Standard (CF) and the Attribute Convention for Data Discovery
(ACDD). To test whether the dataset is compliant, we can run several
checks:</p>
<div class="section" id="Climate-and-Forecast-Metadata-Standard-(CF)-compliance">
<h3>Climate and Forecast Metadata Standard (CF) compliance<a class="headerlink" href="#Climate-and-Forecast-Metadata-Standard-(CF)-compliance" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>You can test for CF compliance using this online utility:
<a class="reference external" href="http://puma.nerc.ac.uk/cgi-bin/cf-checker.pl">http://puma.nerc.ac.uk/cgi-bin/cf-checker.pl</a></li>
<li>All CF tests should pass</li>
</ul>
</div>
<div class="section" id="Attribute-Convention-for-Data-Discovery-(ACDD)-compliance">
<h3>Attribute Convention for Data Discovery (ACDD) compliance<a class="headerlink" href="#Attribute-Convention-for-Data-Discovery-(ACDD)-compliance" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Run the compliance-checker tool loaded by the dea module on the NCI:
<code class="docutils literal notranslate"><span class="pre">compliance-checker</span> <span class="pre">test_file.nc</span></code></li>
<li>This is a much more detailed check, and will give a total score for
the dataset and an explanation for each failed test.</li>
<li>Every effort should be made to make all ’High Priority’ tests pass,
but there is some flexibility (e.g. varattr may give less than a 100%
score if some attributes that are not applicable for a given variable
like standard_name are not set).</li>
<li>You do not need to pass all ‘Medium priority’ tests, but try to
complete as many as practically possible.</li>
</ul>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [20]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="o">!</span>compliance-checker sample.nc
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Running Compliance Checker on the dataset from: sample.nc


--------------------------------------------------------------------------------
                     The dataset scored 28 out of 51 points
                             during the acdd check
--------------------------------------------------------------------------------
                               Scoring Breakdown:


                                 High Priority
--------------------------------------------------------------------------------
    Name                            :Priority: Score
Conventions                             :3:     2/2
keywords                                :3:     1/1
summary                                 :3:     1/1
title                                   :3:     1/1
varattr                                 :3:     8/9


                                Medium Priority
--------------------------------------------------------------------------------
    Name                            :Priority: Score
acknowledgment/acknowledgement          :2:     0/1
comment                                 :2:     0/1
creator_email                           :2:     0/1
creator_name                            :2:     0/1
creator_url                             :2:     0/1
date_created                            :2:     1/1
date_created_is_iso                     :2:     1/1
date_issued_is_iso                      :2:     0/0
date_metadata_modified_is_iso           :2:     0/0
date_modified_is_iso                    :2:     0/0
geospatial_bounds                       :2:     1/1
geospatial_bounds_crs                   :2:     1/1
geospatial_bounds_vertical_crs          :2:     0/1
geospatial_lat_extents_match            :2:     0/1
geospatial_lat_max                      :2:     1/1
geospatial_lat_min                      :2:     1/1
geospatial_lon_extents_match            :2:     0/1
geospatial_lon_max                      :2:     1/1
geospatial_lon_min                      :2:     1/1
geospatial_vertical_max                 :2:     0/1
geospatial_vertical_min                 :2:     0/1
geospatial_vertical_positive            :2:     0/1
history                                 :2:     1/1
id                                      :2:     0/1
id_has_no_blanks                        :2:     0/0
institution                             :2:     1/1
license                                 :2:     1/1
metadata_link                           :2:     0/1
naming_authority                        :2:     0/1
processing_level                        :2:     0/1
project                                 :2:     0/1
publisher_email                         :2:     1/1
publisher_name                          :2:     0/1
publisher_url                           :2:     0/1
source                                  :2:     1/1
standard_name_vocabulary                :2:     0/1
time_coverage_duration                  :2:     0/1
time_coverage_end                       :2:     1/1
time_coverage_extents_match             :2:     0/1
time_coverage_resolution                :2:     0/1
time_coverage_start                     :2:     1/1
vertical_extents                        :2:     0/0


--------------------------------------------------------------------------------
                  Reasoning for the failed tests given below:


Name                             Priority:     Score:Reasoning
--------------------------------------------------------------------------------
varattr                                :3:     8/ 9 :
    mask                               :3:     2/ 3 :
        var_std_name                   :3:     1/ 2 : Var mask missing attr
                                                      standard_name
acknowledgment/acknowledgement         :2:     0/ 1 : acknowledgement global
                                                      attribute is recommended
comment                                :2:     0/ 1 : Attr comment not present
creator_email                          :2:     0/ 1 : Attr creator_email not
                                                      present
creator_name                           :2:     0/ 1 : Attr creator_name not
                                                      present
creator_url                            :2:     0/ 1 : Attr creator_url not
                                                      present
geospatial_bounds_vertical_crs         :2:     0/ 1 : Attr
                                                      geospatial_bounds_vertical
                                                      _crs not present
geospatial_lat_extents_match           :2:     0/ 1 : Could not find lat
                                                      variable to test extent of
                                                      geospatial_lat_min/max,
                                                      see CF-1.6 spec chapter
                                                      4.1
geospatial_lon_extents_match           :2:     0/ 1 : Could not find lon
                                                      variable to test extent of
                                                      geospatial_lon_min/max,
                                                      see CF-1.6 spec chapter
                                                      4.2
geospatial_vertical_max                :2:     0/ 1 : Attr
                                                      geospatial_vertical_max
                                                      not present
geospatial_vertical_min                :2:     0/ 1 : Attr
                                                      geospatial_vertical_min
                                                      not present
geospatial_vertical_positive           :2:     0/ 1 : Attr
                                                      geospatial_vertical_positi
                                                      ve not present
id                                     :2:     0/ 1 : Attr id not present
metadata_link                          :2:     0/ 1 : Attr metadata_link not
                                                      present
naming_authority                       :2:     0/ 1 : Attr naming_authority not
                                                      present
processing_level                       :2:     0/ 1 : Attr processing_level not
                                                      present
project                                :2:     0/ 1 : Attr project not present
publisher_name                         :2:     0/ 1 : Attr publisher_name not
                                                      present
publisher_url                          :2:     0/ 1 : Attr publisher_url not
                                                      present
standard_name_vocabulary               :2:     0/ 1 : Attr
                                                      standard_name_vocabulary
                                                      not present
time_coverage_duration                 :2:     0/ 1 : Attr
                                                      time_coverage_duration not
                                                      present
time_coverage_extents_match            :2:     0/ 1 : Could not find time
                                                      variable to test extent of
                                                      time_coverage_start/time_c
                                                      overage_end, see CF-1.6
                                                      spec chapter 4.4
time_coverage_resolution               :2:     0/ 1 : Attr
                                                      time_coverage_resolution
                                                      not present
contributor_name                       :1:     0/ 1 : Attr contributor_name not
                                                      present
contributor_role                       :1:     0/ 1 : Attr contributor_role not
                                                      present
creator_institution                    :1:     0/ 1 : Attr creator_institution
                                                      not present
creator_type                           :1:     0/ 2 : Attr creator_type not
                                                      present
date_issued                            :1:     0/ 1 : Attr date_issued not
                                                      present
date_metadata_modified                 :1:     0/ 1 : Attr
                                                      date_metadata_modified not
                                                      present
date_modified                          :1:     0/ 1 : Attr date_modified not
                                                      present
geospatial_lat_resolution              :1:     0/ 1 : Attr
                                                      geospatial_lat_resolution
                                                      not present
geospatial_lon_resolution              :1:     0/ 1 : Attr
                                                      geospatial_lon_resolution
                                                      not present
geospatial_vertical_resolution         :1:     0/ 1 : Attr
                                                      geospatial_vertical_resolu
                                                      tion not present
geospatial_vertical_units              :1:     0/ 1 : Attr
                                                      geospatial_vertical_units
                                                      not present
instrument                             :1:     0/ 1 : Attr instrument not
                                                      present
instrument_vocabulary                  :1:     0/ 1 : Attr instrument_vocabulary
                                                      not present
keywords_vocabulary                    :1:     0/ 1 : Attr keywords_vocabulary
                                                      not present
platform                               :1:     0/ 1 : Attr platform not present
platform_vocabulary                    :1:     0/ 1 : Attr platform_vocabulary
                                                      not present
program                                :1:     0/ 1 : Attr program not present
publisher_institution                  :1:     0/ 1 : Attr publisher_institution
                                                      not present
publisher_type                         :1:     0/ 2 : Attr publisher_type not
                                                      present
references                             :1:     0/ 1 : Attr references not
                                                      present
</pre></div></div>
</div>
</div>
<div class="section" id="Check-file-opens-correctly-in-QGIS">
<h3>Check file opens correctly in QGIS<a class="headerlink" href="#Check-file-opens-correctly-in-QGIS" title="Permalink to this headline">¶</a></h3>
<p>If your file contains spatial data, open the NetCDF in QGIS to verify it
plots in the correct location, and that nodata values are correctly
accounted for.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../Workflows/README.html" class="btn btn-neutral float-right" title="Workflows" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="PlottingAnimatedGifs.html" class="btn btn-neutral" title="Plotting animations from time series imagery" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Geoscience Australia.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'1.0.0',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  <script type="text/javascript" src="../../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>


<!-- Theme Analytics -->
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-113800428-1"></script>
<script>
 window.dataLayer = window.dataLayer || [];
 function gtag(){dataLayer.push(arguments);}
 gtag('js', new Date());
 
 gtag('config', 'UA-113800428-1');
</script>

    
  


</body>
</html>